import{r,u as j,j as s}from"./index-dL3yQH6R.js";import{b as v,a as E}from"./baseUrl-utvwXsCn.js";import{L}from"./LandscapeContainer-g5AyfMJ9.js";import{g as b,s as N}from"./localStorageHandler-AKYRjB99.js";const w="_loginContainer_1a3ab_1",C={loginContainer:w},O=()=>{const[t,d]=r.useState(""),[o,p]=r.useState(""),[f,i]=r.useState(!1),[x,n]=r.useState(""),[c,l]=r.useState(!1),u=j();r.useEffect(()=>{b()&&u("/dashboard")},[]);const h=async a=>{a.preventDefault(),l(!0);try{if(i(!1),t&&o){const e=await E.post(`${v}/auth/login`,{user_name:t,password:o}),{status:m,data:g}=e;if(m===200){const S={authToken:g.authToken,userName:g.user.user_name},y=JSON.stringify(S);N(y),u("/dashboard")}}}catch(e){console.log(e),i(!0),e.response?e.response.status===404?n(`No account with user name ${t} found, please recheck and try again`):e.response.status===400&&n("Incorrect Password!!"):e.request?(console.error(`No response received:, ${e.request}`),n("An Unexpected Error Occurred Probably a network network, Please Try Again")):(console.error(`Error:, ${e.message}`),n("An Unexpected Has Error Occured, couldn't log in"))}finally{l(!1)}};return s.jsxs("section",{className:C.loginContainer,children:[s.jsxs("form",{children:[s.jsx("input",{onChange:a=>{d(a.target.value)},value:t,type:"text",placeholder:"USER NAME"}),s.jsx("input",{onChange:a=>{p(a.target.value)},value:o,type:"text",placeholder:"PASSWORD"}),f&&s.jsx("p",{style:{color:"red",width:"280px",textAlign:"center"},children:x}),s.jsx("div",{children:s.jsx("button",{onClick:h,disabled:!t||!o||c,children:c?"Logging":"Login"})})]}),s.jsx("div",{children:s.jsx(L,{})})]})};export{O as default};
